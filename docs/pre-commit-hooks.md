# Pre-commit Hooks –¥–ª—è ERNI-KI

## –û–±–∑–æ—Ä

Pre-commit hooks –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º,
–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø–æ–ø–∞–¥–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ CI/CD pipeline.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm run pre-commit:install
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
python3 -m venv .venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pre-commit
pip install pre-commit detect-secrets

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hooks
pre-commit install
pre-commit install --hook-type commit-msg
```

## –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### üîç –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤

- **Trailing whitespace** - —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫
- **End-of-file** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–æ–≤
- **Large files** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ —Ñ–∞–π–ª–æ–≤ >500KB
- **Merge conflicts** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- **Case conflicts** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤

### üìù –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

- **YAML** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ YAML —Ñ–∞–π–ª–æ–≤
- **JSON** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JSON —Ñ–∞–π–ª–æ–≤
- **TOML** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ TOML —Ñ–∞–π–ª–æ–≤

### üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

- **Prettier** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - Markdown —Ñ–∞–π–ª—ã
  - YAML/JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - JavaScript/TypeScript –∫–æ–¥

### üîß –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞

- **ESLint** - –ø—Ä–æ–≤–µ—Ä–∫–∞ JavaScript/TypeScript:
  - –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
  - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (security plugin)
  - Node.js best practices
  - Promise handling

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Detect Secrets** - –ø–æ–∏—Å–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ:
  - API –∫–ª—é—á–∏
  - –ü–∞—Ä–æ–ª–∏
  - –¢–æ–∫–µ–Ω—ã
  - –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### üìã –ö–æ–º–º–∏—Ç—ã

- **Commitlint** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–æ–≤:
  - Conventional Commits —Å—Ç–∞–Ω–¥–∞—Ä—Ç
  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### üêπ Go –∫–æ–¥

- **gofmt** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Go –∫–æ–¥–∞
- **goimports** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤

### üê≥ Docker

- **Docker Compose** - –≤–∞–ª–∏–¥–∞—Ü–∏—è compose.yml

## –ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

–°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```
.env*                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
conf/litellm/config.yaml # API –∫–ª—é—á–∏
conf/**/*.conf           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
*.key, *.pem, *.crt     # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
secrets/                 # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
data/                    # –î–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–æ–≤
logs/                    # –õ–æ–≥–∏
.config-backup/          # Backup —Ñ–∞–π–ª—ã
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

Pre-commit hooks –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `git commit`.

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
npm run pre-commit:run

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate
pre-commit run --all-files

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
pre-commit run prettier --all-files
pre-commit run eslint --all-files
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ hooks

```bash
npm run pre-commit:update

# –ò–ª–∏
source .venv/bin/activate
pre-commit autoupdate
```

### –ü—Ä–æ–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
git commit --no-verify -m "—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞"
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

Pre-commit hooks –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å:

- **ESLint** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eslint.config.js`
- **Prettier** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.prettierrc`
- **Commitlint** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `commitlint.config.cjs`
- **Husky** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ hooks

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
npm run format
npm run lint:fix
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ baseline
source .venv/bin/activate
detect-secrets scan --baseline .secrets.baseline
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```bash
source .venv/bin/activate
pre-commit clean
pre-commit install --install-hooks
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**: 2-3 –º–∏–Ω—É—Ç—ã (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π)
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏**: 10-30 —Å–µ–∫—É–Ω–¥
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **Python**: 3.12+
- **Node.js**: 20.18.0+
- **Git**: 2.0+
- **Docker**: –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ compose —Ñ–∞–π–ª–æ–≤
- **Go**: –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Go –∫–æ–¥–∞

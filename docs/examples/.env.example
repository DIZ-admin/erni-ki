---
language: en
translation_status: complete
doc_version: '2025.11'
last_updated: '2025-11-30'
---

# ERNI-KI Complete Environment Configuration Template
#
# This file contains all available environment variables with descriptions.
# Copy this to .env in the project root and adjust values for your deployment.
#
# Categories:
#   - Core Services: Essential for system operation
#   - Persistence: Database and storage configuration
#   - Monitoring: Observability and metrics collection
#   - Security: Authentication, secrets, and TLS
#   - GPU: CUDA and GPU device allocation
#   - Performance: Caching, rate limiting, resource limits
#   - Integration: External service connections
#   - Development: Debug and development-only features

################################################################################
# CORE SERVICES - Essential Configuration
################################################################################

# OpenWebUI Configuration
OPENWEBUI_HOST=0.0.0.0
OPENWEBUI_PORT=8080
OPENWEBUI_BASE_URL=http://localhost:8080
OPENWEBUI_LOG_LEVEL=INFO
# Admin user for OpenWebUI (must match OPENWEBUI_ADMIN_USER_ID in database)
OPENWEBUI_DEFAULT_USER_ROLE=user
OPENWEBUI_SHOW_ADMIN_DETAILS=true

# Ollama Configuration
OLLAMA_HOST=http://ollama:11434
OLLAMA_DEBUG=false
OLLAMA_NUM_PARALLEL=4
OLLAMA_NUM_QUEUE=512
OLLAMA_KEEP_ALIVE=5m

# LiteLLM Gateway
LITELLM_ENABLED=true
LITELLM_HOST=0.0.0.0
LITELLM_PORT=4000
LITELLM_LOG_LEVEL=INFO
# Model router configuration
LITELLM_FALLBACK_ENABLED=true
LITELLM_TIMEOUT=600

# SearXNG Configuration
SEARXNG_ENABLED=false
SEARXNG_HOST=searxng
SEARXNG_PORT=8888
SEARXNG_BASE_URL=http://localhost:8888

################################################################################
# PERSISTENCE - Database and Storage
################################################################################

# PostgreSQL - OpenWebUI Database
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=openwebui
POSTGRES_USER=openwebui
POSTGRES_PASSWORD=change-me-in-production
# Connection pooling
POSTGRES_POOL_MIN=5
POSTGRES_POOL_MAX=20
POSTGRES_POOL_TIMEOUT=10
POSTGRES_POOL_IDLE_TIMEOUT=600

# Redis - Caching and Sessions
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
# Redis configuration
REDIS_POOL_SIZE=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE=true
REDIS_SOCKET_KEEPALIVE_INTERVAL=60

# Minio - S3-compatible object storage for documents
MINIO_ENABLED=false
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=documents
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# Data Directories
DATA_DIR=/data
DOCUMENTS_DIR=/data/documents
MODELS_DIR=/data/models
CACHE_DIR=/data/cache

################################################################################
# MONITORING - Observability
################################################################################

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_HOST=0.0.0.0
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=15d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Grafana
GRAFANA_ENABLED=true
GRAFANA_HOST=0.0.0.0
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_PROVISIONING_ENABLED=true

# Alertmanager
ALERTMANAGER_ENABLED=true
ALERTMANAGER_HOST=0.0.0.0
ALERTMANAGER_PORT=9093
ALERTMANAGER_WEBHOOK_URL=http://localhost:5001/webhook

# Loki - Log aggregation
LOKI_ENABLED=true
LOKI_HOST=0.0.0.0
LOKI_PORT=3100
LOKI_RETENTION=720h

# Fluent Bit - Log forwarding
FLUENT_BIT_ENABLED=true
FLUENT_BIT_HTTP_HOST=0.0.0.0
FLUENT_BIT_HTTP_PORT=2020
FLUENT_BIT_LOG_LEVEL=INFO

# Exporters - Metrics exporters for various services
# Node Exporter (system metrics)
NODE_EXPORTER_ENABLED=true
NODE_EXPORTER_PORT=9100

# Cadvisor (container metrics)
CADVISOR_ENABLED=true
CADVISOR_PORT=8081

# Redis Exporter
REDIS_EXPORTER_ENABLED=true
REDIS_EXPORTER_PORT=9121

# Ollama Exporter (custom metrics)
OLLAMA_EXPORTER_ENABLED=true
OLLAMA_EXPORTER_PORT=8888

################################################################################
# SECURITY - Authentication and Encryption
################################################################################

# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# HMAC Secret for Webhook Signatures
WEBHOOK_SECRET=your-webhook-secret-key-change-in-production
WEBHOOK_SIGNATURE_ALGORITHM=sha256
WEBHOOK_TIMEOUT=10

# API Keys
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
COHERE_API_KEY=
HUGGINGFACE_API_TOKEN=

# TLS/SSL Configuration
TLS_ENABLED=false
TLS_CERT_PATH=/etc/certs/tls.crt
TLS_KEY_PATH=/etc/certs/tls.key
TLS_CA_PATH=/etc/certs/ca.crt

# Database Encryption
DB_ENCRYPTION_ENABLED=false
DB_ENCRYPTION_KEY=

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_WEBHOOK_PER_MINUTE=10

################################################################################
# GPU - CUDA and Device Allocation
################################################################################

# Ollama GPU Configuration
OLLAMA_GPU_VISIBLE_DEVICES=0
OLLAMA_CUDA_VISIBLE_DEVICES=0
OLLAMA_GPU_DEVICE_IDS=0
OLLAMA_CUDA_COMPUTE_CAPABILITY=

# OpenWebUI GPU Configuration
OPENWEBUI_GPU_VISIBLE_DEVICES=1
OPENWEBUI_CUDA_VISIBLE_DEVICES=1
OPENWEBUI_GPU_DEVICE_IDS=1

# Docling OCR GPU Configuration
DOCLING_GPU_VISIBLE_DEVICES=1
DOCLING_CUDA_VISIBLE_DEVICES=1
DOCLING_GPU_DEVICE_IDS=1

# GPU Memory and Compute Settings
CUDA_DEVICE_ORDER=PCI_BUS_ID
CUDA_FORCE_PTX_JIT=1
CUDA_LAUNCH_BLOCKING=0

################################################################################
# PERFORMANCE - Optimization and Resource Limits
################################################################################

# Caching Strategy
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_REDIS_URL=redis://redis:6379/0

# Memory and Resource Limits
OPENWEBUI_MEMORY_LIMIT=4g
OPENWEBUI_CPUS_LIMIT=4
OLLAMA_MEMORY_LIMIT=8g
OLLAMA_CPUS_LIMIT=8
POSTGRES_MEMORY_LIMIT=2g
POSTGRES_CPUS_LIMIT=4
REDIS_MEMORY_LIMIT=1g
REDIS_CPUS_LIMIT=2

# Query Optimization
DB_QUERY_TIMEOUT=30
DB_QUERY_LOG_MIN_DURATION=1000
DB_WORK_MEM=256MB
DB_SHARED_BUFFERS=1GB

# Connection Pooling
CONNECTION_POOL_ENABLED=true
CONNECTION_POOL_SIZE=20
CONNECTION_POOL_TIMEOUT=10

# Thread and Worker Configuration
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1024
KEEPALIVE_TIMEOUT=65

################################################################################
# INTEGRATION - External Services
################################################################################

# Email Configuration (for notifications)
EMAIL_ENABLED=false
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USERNAME=
EMAIL_PASSWORD=
EMAIL_FROM=noreply@example.com
EMAIL_USE_TLS=true

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_RECEIVER_HOST=webhook-receiver
WEBHOOK_RECEIVER_PORT=5001
WEBHOOK_RETRY_ENABLED=true
WEBHOOK_RETRY_MAX_ATTEMPTS=3
WEBHOOK_RETRY_BACKOFF_MULTIPLIER=2

# External LLM Providers (for LiteLLM fallback)
OPENAI_API_BASE=https://api.openai.com/v1
ANTHROPIC_API_BASE=https://api.anthropic.com
COHERE_API_BASE=https://api.cohere.io

# Search Configuration
SEARCH_PROVIDER=searxng
SEARCH_TIMEOUT=10
SEARCH_RESULTS_LIMIT=10

################################################################################
# DEVELOPMENT - Debug and Testing
################################################################################

# Logging Configuration
APP_LOG_LEVEL=INFO
APP_LOG_FORMAT=json
APP_LOG_FILE=/var/log/app.log
APP_LOG_MAX_BYTES=10485760
APP_LOG_BACKUP_COUNT=10

# Debug Mode
DEBUG=false
DEBUG_TOOLBAR_ENABLED=false
DEBUG_PROFILING_ENABLED=false

# Testing Configuration
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/openwebui_test # pragma: allowlist secret
TEST_REDIS_URL=redis://localhost:6379/15 # pragma: allowlist secret
PYTEST_COVERAGE_THRESHOLD=80

# Development Tools
IPYTHON_ENABLED=false
FLASK_ENV=production
PYTHONUNBUFFERED=1

# Hot Reload (development only)
RELOAD_ON_CHANGE=false
RELOAD_DIRS=src

################################################################################
# ADVANCED - Internal and Platform-Specific
################################################################################

# Archon Task Management Integration
ARCHON_ENABLED=false
ARCHON_HOST=archon
ARCHON_PORT=5000
ARCHON_API_KEY=

# Feature Flags
FEATURE_RAG=true
FEATURE_WEBHOOKS=true
FEATURE_GPU_SUPPORT=true
FEATURE_MULTI_MODAL=true
FEATURE_KNOWLEDGE_GRAPHS=false
FEATURE_CODE_INTERPRETER=false

# Platform Detection
PLATFORM_ARCHITECTURE=x86_64
PLATFORM_OS=linux
DOCKER_ROOTLESS=false

# Custom Metadata
DEPLOYMENT_ENV=development
DEPLOYMENT_VERSION=2025.11
DEPLOYMENT_REGION=local
ORGANIZATION_NAME=
ORGANIZATION_ID=

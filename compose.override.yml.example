# Docker Compose Override Configuration для ERNI-KI
# Скопировать в compose.override.yml для кастомизации
# Дата обновления: 2025-09-19
# Статус: Production Ready - кастомизация для специфических сред

# Этот файл позволяет переопределить настройки из основного compose.yml
# без изменения основного файла конфигурации

version: '3.8'

services:
  # === КАСТОМИЗАЦИЯ OLLAMA ДЛЯ GPU ===
  # Раскомментируйте для включения GPU поддержки
  # ollama:
  #   deploy:
  #     resources:
  #       reservations:
  #         devices:
  #           - driver: nvidia
  #             count: all
  #             capabilities: [gpu]
  #   environment:
  #     - NVIDIA_VISIBLE_DEVICES=all
  #     - NVIDIA_DRIVER_CAPABILITIES=compute,utility

  # === КАСТОМИЗАЦИЯ ПОРТОВ ===
  # Изменение портов для избежания конфликтов
  # nginx:
  #   ports:
  #     - "8080:8080"  # Основной порт
  #     - "8443:8443"  # HTTPS порт (если используется)

  # grafana:
  #   ports:
  #     - "3000:3000"  # Grafana веб-интерфейс

  # prometheus:
  #   ports:
  #     - "9091:9090"  # Prometheus веб-интерфейс

  # === КАСТОМИЗАЦИЯ РЕСУРСОВ ===
  # Ограничение ресурсов для production среды
  # openwebui:
  #   deploy:
  #     resources:
  #       limits:
  #         memory: 2G
  #         cpus: '1.0'
  #       reservations:
  #         memory: 1G
  #         cpus: '0.5'

  # === КАСТОМИЗАЦИЯ ЛОГИРОВАНИЯ ===
  # Централизованное логирование через Fluent Bit
  # openwebui:
  #   logging:
  #     driver: fluentd
  #     options:
  #       fluentd-address: localhost:24224
  #       tag: erni-ki.openwebui

  # === КАСТОМИЗАЦИЯ МОНИТОРИНГА ===
  # Дополнительные метрики для специфических сервисов
  # litellm:
  #   environment:
  #     - PROMETHEUS_METRICS_ENABLED=true
  #     - GRAFANA_DASHBOARD_INTEGRATION=true
  #     - MONITORING_SYSTEM_VERSION=2025-09-19

  # === КАСТОМИЗАЦИЯ БЕЗОПАСНОСТИ ===
  # Дополнительные настройки безопасности
  # db:
  #   environment:
  #     - POSTGRES_SSL_MODE=require
  #     - POSTGRES_SSL_CERT=/etc/ssl/certs/postgres.crt
  #     - POSTGRES_SSL_KEY=/etc/ssl/private/postgres.key

  # === КАСТОМИЗАЦИЯ СЕТЕЙ ===
  # Дополнительные сети для изоляции сервисов
  # networks:
  #   monitoring:
  #     driver: bridge
  #     ipam:
  #       config:
  #         - subnet: 172.20.0.0/16

  # === КАСТОМИЗАЦИЯ VOLUMES ===
  # Дополнительные тома для данных
  # volumes:
  #   custom_data:
  #     driver: local
  #     driver_opts:
  #       type: none
  #       o: bind
  #       device: /path/to/your/custom/data

# === ВАЖНО: НАСТРОИТЬ ПЕРЕД ПРОДАКШЕНОМ ===
# ⚠️ Раскомментируйте только необходимые секции
# ⚠️ Проверьте совместимость с основным compose.yml
# ⚠️ Убедитесь в доступности портов на хост-системе
# ⚠️ Настройте ресурсы согласно доступным возможностям
# ⚠️ Проверьте корректность путей к SSL сертификатам
# ⚠️ Убедитесь в совместимости с системой мониторинга (18 дашбордов Grafana)

# === ИНТЕГРАЦИЯ С СИСТЕМОЙ МОНИТОРИНГА ===
# Этот override файл совместим с оптимизированной системой мониторинга ERNI-KI:
# - 18 дашбордов Grafana (100% функциональны)
# - Prometheus запросы с fallback значениями
# - Поддержка 29+ микросервисов
# - Context7 интеграция для улучшенного AI контекста
# - LiteLLM Context Engineering
# - Docling OCR с многоязычной поддержкой (EN, DE, FR, IT)

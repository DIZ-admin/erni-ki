# Blackbox Exporter Configuration for ERNI-KI
# Availability checks for external/internal services

# === Basics ===
# Web listen address
BLACKBOX_EXPORTER_WEB_LISTEN_ADDRESS=0.0.0.0:9115
# Config file path
BLACKBOX_EXPORTER_CONFIG_FILE=/etc/blackbox_exporter/config.yml

# === HTTP probes ===
# HTTP request timeout
BLACKBOX_HTTP_TIMEOUT=10s
# Follow redirects
BLACKBOX_HTTP_FOLLOW_REDIRECTS=true
# Max redirects
BLACKBOX_HTTP_MAX_REDIRECTS=3
# Verify TLS certs
BLACKBOX_HTTP_TLS_INSECURE_SKIP_VERIFY=false

# === ICMP probes ===
# ICMP timeout
BLACKBOX_ICMP_TIMEOUT=5s
# ICMP packet size
BLACKBOX_ICMP_PACKET_SIZE=64
# Packet count
BLACKBOX_ICMP_PACKET_COUNT=3

# === TCP probes ===
# TCP timeout
BLACKBOX_TCP_TIMEOUT=5s
# Check TLS over TCP
BLACKBOX_TCP_TLS=false

# === DNS probes ===
# DNS timeout
BLACKBOX_DNS_TIMEOUT=5s
# DNS server
BLACKBOX_DNS_SERVER=8.8.8.8:53
# DNS record type
BLACKBOX_DNS_QUERY_TYPE=A

# === Logging ===
# Log level
BLACKBOX_EXPORTER_LOG_LEVEL=info
# Log format
BLACKBOX_EXPORTER_LOG_FORMAT=logfmt

# === Performance ===
# Max concurrent probes
BLACKBOX_EXPORTER_MAX_CONCURRENT_REQUESTS=20
# Scrape interval
BLACKBOX_EXPORTER_SCRAPE_INTERVAL=30s

# === Targets ===
# Main site URL
BLACKBOX_TARGET_MAIN_URL=https://your-domain.com
# API health URL
BLACKBOX_TARGET_API_URL=http://localhost:8080/health
# SearXNG health URL
BLACKBOX_TARGET_SEARXNG_URL=http://localhost:8080/searxng/healthz

# === SSL monitoring ===
# Warn N days before certificate expiration
BLACKBOX_SSL_EXPIRY_WARNING_DAYS=30
# Verify certificate chain
BLACKBOX_SSL_CHECK_CHAIN=true

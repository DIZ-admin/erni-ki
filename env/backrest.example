# Backrest Configuration
# Web UI and orchestrator for restic backups

# === Basics ===
BACKREST_PORT=0.0.0.0:9898
BACKREST_CONFIG=/config/config.json
BACKREST_DATA=/data
XDG_CACHE_HOME=/cache
TMPDIR=/tmp
TZ=Europe/Moscow

# === Authentication ===
# ⚠️ MUST set secure creds for production; generate via: openssl rand -base64 32
BACKREST_USERNAME=admin
BACKREST_PASSWORD=CHANGE_THIS_PASSWORD_BEFORE_PRODUCTION

# === Restic ===
# Path to restic binary (leave empty for auto install)
BACKREST_RESTIC_COMMAND=

# === Backup storage ===
# Local storage (default)
BACKREST_REPO_PATH=/data/repositories

# === S3-compatible storage (optional) ===
# Uncomment/configure for S3/B2/MinIO
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_DEFAULT_REGION=us-east-1

# === Backblaze B2 (optional) ===
# B2_ACCOUNT_ID=your_account_id
# B2_ACCOUNT_KEY=your_account_key

# === Google Cloud Storage (optional) ===
# GOOGLE_PROJECT_ID=your_project_id
# GOOGLE_APPLICATION_CREDENTIALS=/config/gcs-credentials.json

# === SFTP storage (optional) ===
# SFTP_HOST=backup.example.com
# SFTP_USER=backup_user
# SFTP_PATH=/backups/erni-ki

# === Notifications ===
# Discord webhook (optional)
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# Slack webhook (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

# Gotify (optional)
# GOTIFY_URL=https://gotify.example.com
# GOTIFY_TOKEN=your_gotify_token

# === Performance ===
# Bandwidth limits (KB/s)
RESTIC_LIMIT_UPLOAD=0
RESTIC_LIMIT_DOWNLOAD=0

# Количество параллельных операций
RESTIC_PACK_SIZE=16
RESTIC_COMPRESSION=auto

# === Безопасность ===
# Пароль для шифрования репозитория (ОБЯЗАТЕЛЬНО ИЗМЕНИТЬ!)
RESTIC_PASSWORD=CHANGE_BEFORE_GOING_LIVE_BACKUP_ENCRYPTION_KEY

# === Логирование ===
BACKREST_LOG_LEVEL=info
RESTIC_VERBOSE=1

# === Дополнительные опции ===
# Отключить блокировку репозитория (только для отладки)
# RESTIC_NO_LOCK=true

# Кастомные флаги для restic
# RESTIC_EXTRA_FLAGS=--verbose

# === Мониторинг ===
# Healthchecks.io (опционально)
# HEALTHCHECKS_URL=https://hc-ping.com/your-uuid

# === Интеграция с Docker ===
# Доступ к Docker socket для остановки сервисов во время бэкапа
DOCKER_HOST=unix:///var/run/docker.sock

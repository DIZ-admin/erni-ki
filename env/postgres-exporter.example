# PostgreSQL Exporter Configuration for ERNI-KI
# PostgreSQL metrics exporter for Prometheus

# === Database connection ===
# PostgreSQL connection URL (injected from Docker secret postgres_exporter_dsn)
DATA_SOURCE_NAME=
# Database to monitor
PG_EXPORTER_DATABASE=openwebui
# Connection user
PG_EXPORTER_USER=postgres

# === Web server ===
# Listen address
PG_EXPORTER_WEB_LISTEN_ADDRESS=0.0.0.0:9187
# Metrics path
PG_EXPORTER_WEB_TELEMETRY_PATH=/metrics

# === Queries & metrics ===
# Path to custom queries file
PG_EXPORTER_EXTEND_QUERY_PATH=/etc/postgres_exporter/queries.yaml
# Discover databases automatically
PG_EXPORTER_AUTO_DISCOVER_DATABASES=true
# Exclude system databases
PG_EXPORTER_EXCLUDE_DATABASES=template0,template1

# === Performance ===
# Query timeout (seconds)
PG_EXPORTER_QUERY_TIMEOUT=5
# Max open connections
PG_EXPORTER_MAX_OPEN_CONNECTIONS=3
# Max idle connections
PG_EXPORTER_MAX_IDLE_CONNECTIONS=3

# === Logging ===
# Log level
PG_EXPORTER_LOG_LEVEL=info
# Log format
PG_EXPORTER_LOG_FORMAT=logfmt

# === Security ===
# Disable default metrics (keep false to export defaults)
PG_EXPORTER_DISABLE_DEFAULT_METRICS=false
# Disable settings metrics (can leak sensitive info)
PG_EXPORTER_DISABLE_SETTINGS_METRICS=true

# === Specific metrics ===
# Table metrics
PG_EXPORTER_INCLUDE_TABLE_METRICS=true
# Index metrics
PG_EXPORTER_INCLUDE_INDEX_METRICS=true
# Lock metrics
PG_EXPORTER_INCLUDE_LOCK_METRICS=true
# Replication metrics
PG_EXPORTER_INCLUDE_REPLICATION_METRICS=false

# === Caching ===
# Cache TTL (seconds)
PG_EXPORTER_CACHE_SECONDS=30
# Enable caching
PG_EXPORTER_ENABLE_CACHE=true

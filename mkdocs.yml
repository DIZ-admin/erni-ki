# MkDocs configuration for erni-ki project
# Technical documentation generation

site_name: ERNI-KI Documentation
site_description: "ERNI-KI Project Documentation - AI platform with Open WebUI"
site_author: "ERNI-KI Team"
site_url: "https://docs.erni-gruppe.ch"

# Repository
repo_name: "DIZ-admin/erni-ki"
repo_url: "https://github.com/DIZ-admin/erni-ki"
edit_uri: "edit/main/docs/"

# Configuration
docs_dir: "docs"
site_dir: "site"
exclude_docs: |
  archive/README.md
  archive/audits/README.md
  archive/diagnostics/README.md
  archive/incidents/README.md
  data/README.md

# Theme
theme:
  name: "material"
  language: "en"

  # Color scheme
  palette:
    - scheme: default
      primary: "blue"
      accent: "light blue"
      toggle:
        icon: material/brightness-7
        name: Switch to dark mode
    - scheme: slate
      primary: "blue"
      accent: "light blue"
      toggle:
        icon: material/brightness-4
        name: Switch to light mode

  # Fonts
  font:
    text: "Roboto"
    code: "Roboto Mono"

  # Icons
  icon:
    repo: fontawesome/brands/github
    logo: material/robot

  # Features
  features:
    - navigation.tabs
    - navigation.tabs.sticky
    - navigation.sections
    # - navigation.expand  # Disabled: causes excessive expansion with simplified nav structure
    - navigation.path
    - navigation.indexes
    - toc.follow
    - toc.integrate
    - search.suggest
    - search.highlight
    - search.share
    - header.autohide
    - content.code.copy
    - content.code.annotate
    - content.tabs.link
    - content.tooltips
    - content.action.edit
    - content.action.view

# Plugins
plugins:
  - search:
      lang:
        - en
        - ru
        - de
  - awesome-pages
  # Blog plugin disabled - incompatible with i18n folder structure (docs_structure: folder)
  # The blog plugin creates conflicts with localized content in en/, ru/, de/ directories
  # Re-evaluate when mkdocs-material blog plugin adds i18n support
  # - blog:
  #     blog_dir: news
  #     post_dir: news
  #     categories: true
  #     blog_toc: true
  #     archive: false
  - include-markdown
  - i18n:
      docs_structure: folder
      languages:
        - locale: en
          default: true
          name: "English"
        - locale: ru
          name: "Russian"
          site_name: "ERNI Academy KI"
          nav_translations:
            # Top-level sections (Diataxis framework)
            Home: "Главная"
            "Platform Overview": "Обзор платформы"
            Tutorials: "Обучение"
            Guides: "Руководства"
            Reference: "Справочник"
            Concepts: "Концепции"
            "Academy KI": "Academy KI"
            Archive: "Архив"
            Changelog: "Изменения"
            # Tutorials section
            "Quick Start": "Быстрый старт"
            "Installation": "Установка"
            "Configuration": "Конфигурация"
            "User Guide": "Руководство пользователя"
            # Guides section
            "User Guides": "Для пользователей"
            "Admin Guides": "Для администраторов"
            "Industry Guides": "По отраслям"
            "Write Email": "Написать email"
            "Create JIRA": "Создать JIRA"
            "Summarize Meeting": "Резюме встречи"
            "Operations Handbook": "Руководство по операциям"
            "Backup Guide": "Резервное копирование"
            Maintenance: "Обслуживание"
            Construction: "Строительство"
            Timber: "Деревообработка"
            # Reference section
            Overview: "Обзор"
            Architecture: "Архитектура"
            Services: "Сервисы"
            Diagrams: "Диаграммы"
            Operations: "Операции"
            Database: "База данных"
            Monitoring: "Мониторинг"
            Automation: "Автоматизация"
            API: "API"
            Standards: "Стандарты"
            "Style Guide": "Руководство по стилю"
            "Code Standards": "Стандарты кода"
            "Security Policy": "Политика безопасности"
            # Concepts section
            "AI Basics": "Основы ИИ"
            "Prompting 101": "Промпты 101"
            "Context Engineering": "Контекстная инженерия"
            "OpenWebUI Basics": "Основы OpenWebUI"
            # Academy section
            "By Role": "По ролям"
            Developers: "Разработчики"
            Managers: "Менеджеры"
            Support: "Поддержка"
            Users: "Пользователи"
            Resources: "Ресурсы"
            Glossary: "Глоссарий"
            Templates: "Шаблоны"
            "Cheat Sheets": "Шпаргалки"
            News: "Новости"
            # Archive section
            Reports: "Отчёты"
            Audits: "Аудиты"
            Incidents: "Инциденты"
            # Legacy translations (keep for backward compatibility)
            "External Access": "Внешний доступ"
            "Local DNS": "Локальный DNS"
            "DNSMasq": "DNSMasq"
            "Port Forwarding": "Проброс портов"
            "Inventory": "Инвентарь"
            "Nginx configuration": "Конфигурация Nginx"
            System: "Система"
            "System Status": "Статус системы"
            "HowTo": "Инструкции"
            Security: "Безопасность"
            Development: "Разработка"
            VERSION: "ВЕРСИЯ"
            CHANGELOG: "ИЗМЕНЕНИЯ"
        - locale: de
          name: "Deutsch"
          nav_translations:
            # Top-level sections (Diataxis framework)
            Home: "Startseite"
            "Platform Overview": "Plattformübersicht"
            Tutorials: "Tutorials"
            Guides: "Anleitungen"
            Reference: "Referenz"
            Concepts: "Konzepte"
            "Academy KI": "Academy KI"
            Archive: "Archiv"
            Changelog: "Änderungen"
            # Tutorials section
            "Quick Start": "Schnellstart"
            "Installation": "Installation"
            "Configuration": "Konfiguration"
            "User Guide": "Benutzerhandbuch"
            # Guides section
            "User Guides": "Für Benutzer"
            "Admin Guides": "Für Administratoren"
            "Industry Guides": "Nach Branche"
            "Write Email": "E-Mail schreiben"
            "Create JIRA": "JIRA erstellen"
            "Summarize Meeting": "Meeting zusammenfassen"
            "Operations Handbook": "Betriebshandbuch"
            "Backup Guide": "Backup-Anleitung"
            Maintenance: "Wartung"
            Construction: "Bauwesen"
            Timber: "Holzbau"
            # Reference section
            Overview: "Übersicht"
            Architecture: "Architektur"
            Services: "Dienste"
            Diagrams: "Diagramme"
            Operations: "Betrieb"
            Database: "Datenbank"
            Monitoring: "Monitoring"
            Automation: "Automatisierung"
            API: "API"
            Standards: "Standards"
            "Style Guide": "Stil-Leitfaden"
            "Code Standards": "Code-Standards"
            "Security Policy": "Sicherheitsrichtlinie"
            # Concepts section
            "AI Basics": "KI-Grundlagen"
            "Prompting 101": "Prompting 101"
            "Context Engineering": "Context Engineering"
            "OpenWebUI Basics": "OpenWebUI-Grundlagen"
            # Academy section
            "By Role": "Nach Rolle"
            Developers: "Entwickler"
            Managers: "Manager"
            Support: "Support"
            Users: "Benutzer"
            Resources: "Ressourcen"
            Glossary: "Glossar"
            Templates: "Vorlagen"
            "Cheat Sheets": "Spickzettel"
            News: "News"
            # Archive section
            Reports: "Berichte"
            Audits: "Audits"
            Incidents: "Vorfälle"
            # Legacy translations (keep for backward compatibility)
            "External Access": "Externer Zugriff"
            "Local DNS": "Lokales DNS"
            "DNSMasq": "DNSMasq"
            "Port Forwarding": "Portweiterleitung"
            "Inventory": "Inventar"
            "Nginx configuration": "Nginx-Konfiguration"
            System: "System"
            "System Status": "Systemstatus"
            "HowTo": "HowTo"
            Security: "Sicherheit"
            Development: "Entwicklung"
            VERSION: "VERSION"
            CHANGELOG: "CHANGELOG"
  - minify:
      minify_html: true
  - git-revision-date-localized:
      enabled: false

# Markdown Extensions
markdown_extensions:
  # Python Markdown
  - abbr
  - admonition
  - attr_list
  - def_list
  - footnotes
  - md_in_html
  - toc:
      permalink: true
      title: "Table of Contents"

  # Python Markdown Extensions
  - pymdownx.arithmatex:
      generic: true
  - pymdownx.betterem:
      smart_enable: all
  - pymdownx.caret
  - pymdownx.details
  - pymdownx.emoji:
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.highlight:
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
  - pymdownx.inlinehilite
  - pymdownx.keys
  - pymdownx.magiclink:
      repo_url_shorthand: true
      user: DIZ-admin
      repo: erni-ki
  - pymdownx.mark
  - pymdownx.smartsymbols
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
  - pymdownx.tabbed:
      alternate_style: true
  - pymdownx.tasklist:
      custom_checkbox: true
  - pymdownx.tilde

# Extra CSS and JS
extra_css:
  - stylesheets/extra.css

extra_javascript:
  - javascripts/mathjax.js
  - https://polyfill.io/v3/polyfill.min.js?features=es6
  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js

# Extra settings
extra:
  version:
    provider: mike
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/DIZ-admin/erni-ki
    - icon: fontawesome/brands/docker
      link: https://github.com/DIZ-admin/erni-ki/pkgs/container/erni-ki%2Fauth
  alternate:
    - name: "English"
      link: /
      lang: en
    - name: "Russian"
      link: /ru/
      lang: ru
    - name: "Deutsch"
      link: /de/
      lang: de

  analytics:
    provider: google
    property: G-XXXXXXXXXX
  consent:
    title: Cookie Consent
    description: >-
      We use cookies to improve documentation and analytics.
      With your consent, this helps us improve the documentation.

# Navigation Structure - Optimized using Diataxis Framework
# See: https://diataxis.fr/
# Reduced from 35+ sections to 8 top-level sections
nav:
  - Home: index.md
  - "Platform Overview": overview.md

  # TUTORIALS - Learning-oriented (for newcomers)
  - Tutorials:
      - Overview: getting-started/index.md
      - "Quick Start": getting-started/installation.md
      - Configuration: getting-started/configuration-guide.md
      - "User Guide": getting-started/user-guide.md
      - "External Access": getting-started/external-access-setup.md
      - "Network Setup":
          - "Local DNS": getting-started/local-network-dns-setup.md
          - "DNSMasq": getting-started/dnsmasq-setup-instructions.md
          - "Port Forwarding": getting-started/port-forwarding-setup.md

  # GUIDES - Task-oriented (how to solve specific problems)
  - Guides:
      - Overview: guides/index.md
      - "User Guides":
          - "Write Email": academy/howto/write-customer-email.md
          - "Create JIRA": academy/howto/create-jira-ticket-with-ai.md
          - "Summarize Meeting": academy/howto/summarize-meeting-notes.md
      - "Admin Guides":
          - "Operations Handbook": operations/core/operations-handbook.md
          - "Backup Guide": operations/backup-guide.md
          - Maintenance: operations/maintenance/index.md
          - "Service Restart": operations/maintenance/service-restart-procedures.md
          - "Image Upgrade": operations/maintenance/image-upgrade-checklist.md
      - "Industry Guides":
          - Construction: academy/by-industry/construction/index.md
          - Timber: academy/by-industry/holzbau/index.md

  # REFERENCE - Information-oriented (technical descriptions)
  - Reference:
      - Overview: reference/index.md
      - Architecture:
          - Overview: architecture/index.md
          - Services: architecture/services-overview.md
          - Inventory: architecture/service-inventory.md
          - "Nginx Config": architecture/nginx-configuration.md
          - Diagrams: architecture/diagrams/index.md
      - Operations:
          - Overview: operations/index.md
          - Database: operations/database/index.md
          - Monitoring: operations/monitoring/index.md
          - Automation: operations/automation/index.md
          - Diagnostics: operations/diagnostics/index.md
      - API:
          - "REST API": reference/api-reference.md
          - "Webhook API": reference/webhook-api.md
          - "MCPO Integration": reference/mcpo-integration-guide.md
      - Security:
          - Overview: security/index.md
          - "Security Policy": security/security-policy.md
      - Standards:
          - "Style Guide": reference/style-guide.md
          - "Code Standards": quality/code-standards.md
          - "Metadata Standards": reference/metadata-standards.md
          - "Language Policy": reference/language-policy.md
          - "No Emoji Policy": reference/NO-EMOJI-POLICY.md
      - Development:
          - Overview: development/index.md
          - "GitHub Environments": reference/github-environments-setup.md
          - "Pre-commit Hooks": reference/pre-commit-hooks.md
      - System:
          - Status: system/status.md
          - "Service Versions": reference/service-versions.md
          - VERSION: VERSION.md
          - CHANGELOG: reference/CHANGELOG.md

  # CONCEPTS - Understanding-oriented (explanations)
  - Concepts:
      - "AI Basics": academy/fundamentals/index.md
      - "Prompting 101": academy/prompting-101.md
      - "Context Engineering": academy/context-engineering-101.md
      - "OpenWebUI Basics": academy/openwebui-basics.md

  # ACADEMY KI - Separate learning product
  - "Academy KI":
      - Overview: academy/index.md
      - "By Role":
          - Developers: academy/by-role/developers/index.md
          - Managers: academy/by-role/managers/index.md
          - Support: academy/by-role/support/index.md
          - Users: academy/by-role/general-users/index.md
      - Resources:
          - Glossary: GLOSSARY.md
          - Templates: academy/resources/templates/index.md
          - "Cheat Sheets": academy/resources/cheat-sheets/index.md
          - "Prompt Library": academy/resources/prompt-bibliothek/index.md
      - News: academy/news/index.md
      - Advanced: academy/advanced/index.md

  # ARCHIVE - Historical documents, reports, audits
  - Archive:
      - Overview: archive/README.md
      - Reports:
          - "Budget Analysis": archive/reports/budget-analysis-2025-11.md
          - "SearXNG Redis Issue": archive/reports/searxng-redis-issue-2025-10.md
      - Audits: archive/audits/index.md
      - Security: archive/security/index.md
      - Diagrams:
          - "Architecture Overview": architecture/diagrams/architecture-overview.md
          - "Data Flow": architecture/diagrams/data-flow.md
          - "Deployment": architecture/diagrams/deployment-diagram.md
          - "Network Topology": architecture/diagrams/network-topology.md

  # TROUBLESHOOTING - Quick access to common issues
  - Troubleshooting:
      - "Common Issues": troubleshooting/common-issues.md
      - "Database Issues": operations/database/database-troubleshooting.md
      - "Monitoring Issues": operations/monitoring/monitoring-guide.md

# Validation Settings
validation:
  omitted_files: warn
  absolute_links: warn
  unrecognized_links: warn

# Build Settings
strict: false
use_directory_urls: true

# MkDocs configuration for erni-ki project
# Technical documentation generation

site_name: ERNI-KI Documentation
site_description: "ERNI-KI Project Documentation - AI platform with Open WebUI"
site_author: "ERNI-KI Team"
site_url: "https://docs.erni-gruppe.ch"

# Repository
repo_name: "DIZ-admin/erni-ki"
repo_url: "https://github.com/DIZ-admin/erni-ki"
edit_uri: "edit/main/docs/"

# Configuration
docs_dir: "docs"
site_dir: "site"
exclude_docs: |
  archive/README.md
  archive/audits/README.md
  archive/diagnostics/README.md
  archive/incidents/README.md
  data/README.md

# Theme
theme:
  name: "material"
  language: "en"

  # Color scheme
  palette:
    - scheme: default
      primary: "blue"
      accent: "light blue"
      toggle:
        icon: material/brightness-7
        name: Switch to dark mode
    - scheme: slate
      primary: "blue"
      accent: "light blue"
      toggle:
        icon: material/brightness-4
        name: Switch to light mode

  # Fonts
  font:
    text: "Roboto"
    code: "Roboto Mono"

  # Icons
  icon:
    repo: fontawesome/brands/github
    logo: material/robot

  # Features
  features:
    - navigation.tabs
    - navigation.tabs.sticky
    - navigation.sections
    - navigation.expand
    - navigation.path
    - navigation.indexes
    - toc.follow
    - toc.integrate
    - search.suggest
    - search.highlight
    - search.share
    - header.autohide
    - content.code.copy
    - content.code.annotate
    - content.tabs.link
    - content.tooltips
    - content.action.edit
    - content.action.view

# Plugins
plugins:
  - search:
      lang:
        - en
        - ru
        - de
  - awesome-pages
  # Blog plugin disabled - incompatible with i18n folder structure (docs_structure: folder)
  # The blog plugin creates conflicts with localized content in en/, ru/, de/ directories
  # TODO(blog): Re-evaluate when mkdocs-material blog plugin adds i18n support
  # - blog:
  #     blog_dir: news
  #     post_dir: news
  #     categories: true
  #     blog_toc: true
  #     archive: false
  - include-markdown
  - i18n:
      docs_structure: folder
      languages:
        - locale: en
          default: true
          name: "English"
        - locale: ru
          name: "Russian"
          site_name: "ERNI Academy KI"
          nav_translations:
            Home: Home
            "Platform Overview": "Platform Overview"
            "Quick Start": "Quick Start"
            "Installation": "Installation"
            "Configuration": "Configuration"
            "Users": "Users"
            "External Access": "External Access"
            "Local DNS": "Local DNS"
            "DNSMasq": "DNSMasq"
            "Port Forwarding": "Port Forwarding"
            Architecture: Architecture
            Overview: Overview
            "Services": "Services"
            "Inventory": "Inventory"
            "Nginx configuration": "Nginx configuration"
            Glossary: Glossary
            "Academy KI": "Academy KI"
            "Open WebUI Basics": "Open WebUI Basics"
            "Prompting 101": "Prompting 101"
            "Context Engineering 101": "Context Engineering 101"
            "HowTo": "HowTo"
            "Create JIRA Ticket": "Create JIRA Ticket"
            "Write Customer Email": "Write Customer Email"
            "Summarize Meeting": "Summarize Meeting"
            "News": "News"
            "Feed": "Feed"
            System: System
            "System Status": "System Status"
            "News (Archive)": "News (Archive)"
            "HowTo (Archive)": "HowTo (Archive)"
            "Create JIRA Description": "Create JIRA Description"
            "Summarize Meeting (Archive)": "Summarize Meeting (Archive)"
            "Customer Email in OpenWebUI": "Customer Email in OpenWebUI"
            "Trainings (Archive)": "Trainings (Archive)"
            Operations: Operations
            "Operations Handbook": "Operations Handbook"
            "Admin Guide": "Admin Guide"
            "Status Page": "Status page"
            Monitoring: Monitoring
            "Monitoring Guide": "Monitoring Guide"
            "Monitoring Troubleshooting": "Monitoring Troubleshooting"
            "Grafana Dashboards": "Grafana dashboards"
            "Prometheus Alerts Guide": "Prometheus alerts guide"
            "Prometheus Queries Reference": "Prometheus queries reference"
            Automation: Automation
            "Automated Maintenance": "Automated maintenance"
            "Docker Cleanup": "Docker cleanup"
            "Docker Log Rotation": "Docker log rotation"
            Maintenance: Maintenance
            "Image Upgrade Checklist": "Image upgrade checklist"
            "RAG & Search": "RAG & Search"
            "RAG Monitoring": "RAG monitoring"
            "SearXNG Redis Troubleshooting": "SearXNG Redis troubleshooting"
            Runbooks: Runbooks
            "Backup & Restore": "Backup & Restore"
            "Configuration Changes": "Configuration changes"
            "Docling Shared Volume": "Docling Shared Volume"
            "Access Log Sync & Fluent Bit": "Access log sync & Fluent Bit"
            "Service Restart": "Service Restart"
            "Alertmanager Noise Reduction": "Alertmanager noise reduction"
            "Troubleshooting": "Troubleshooting"
            "Runbooks (DE Summary)": "Runbooks (DE Summary)"
            Diagnostics: Diagnostics
            "Diagnostics Overview": "Diagnostics Overview"
            "Diagnostic Methodology": "Diagnostic methodology"
            "Troubleshooting Guide": "Troubleshooting guide"
            "Data & Storage": "Data & Storage"
            "Database Monitoring Plan": "Database monitoring plan"
            "Database Optimizations": "Database optimizations"
            "Database Troubleshooting": "Database troubleshooting"
            "Redis Monitoring": "Redis monitoring"
            "Redis Operations": "Redis operations"
            "VLLM Resource Optimization": "VLLM resource optimization"
            Security: Security
            "Security Policy": "Security policy"
            "Log Audit": "Log audit"
            "Reference": "Reference"
            "API Reference": "API reference"
            Development: Development
            "GitHub Environments": "GitHub environments"
            "MCPO Integration": "MCPO integration"
            "Pre-commit Hooks": "Pre-commit hooks"
            "Code Standards": "Code standards"
            "Documentation Refactoring Plan": "Documentation refactoring plan"
            "Status Snippet": "Status snippet"
            VERSION: VERSION
            CHANGELOG: CHANGELOG
            "Reports & Archive": "Reports & Archive"
            "Archive Overview": "Archive Overview"
            "Archive READMEs": "Archive READMEs"
            Audits: Audits
            "Legacy Index": "Legacy index"
            "Legacy Academy Index": "Legacy academy index"
            "Incidents & Remediation": "Incidents & Remediation"
            "Config Archives": "Config Archives"
            Other: Other
            "Remote Branch Cleanup": "Remote branch cleanup"
        - locale: de
          name: "Deutsch"
          nav_translations:
            Home: Startseite
            "Platform Overview": "Plattformübersicht"
            "Quick Start": "Schnellstart"
            "Installation": "Installation"
            "Configuration": "Konfiguration"
            "Users": "Benutzer"
            "External Access": "Externer Zugriff"
            "Local DNS": "Lokales DNS"
            "DNSMasq": "DNSMasq"
            "Port Forwarding": "Portweiterleitung"
            Architecture: Architektur
            Overview: Übersicht
            "Services": "Dienste"
            "Inventory": "Inventar"
            "Nginx configuration": "Nginx-Konfiguration"
            Glossary: Glossar
            "Academy KI": "Academy KI"
            "Open WebUI Basics": "Open WebUI Grundlagen"
            "Prompting 101": "Prompting 101"
            "Context Engineering 101": "Context Engineering 101"
            "HowTo": "HowTo"
            "Create JIRA Ticket": "JIRA-Ticket erstellen"
            "Write Customer Email": "Kunden-E-Mail schreiben"
            "Summarize Meeting": "Meeting zusammenfassen"
            "News": "News"
            "Feed": "Feed"
            System: System
            "System Status": "Systemstatus"
            "News (Archive)": "News (Archiv)"
            "HowTo (Archive)": "HowTo (Archiv)"
            "Create JIRA Description": "JIRA-Beschreibung erstellen"
            "Summarize Meeting (Archive)": "Meeting zusammenfassen (Archiv)"
            "Customer Email in OpenWebUI": "Kunden-E-Mail in OpenWebUI"
            "Trainings (Archive)": "Schulungen (Archiv)"
            Operations: Betrieb
            "Operations Handbook": "Betriebshandbuch"
            "Admin Guide": "Admin-Handbuch"
            "Status Page": "Statusseite"
            Monitoring: Monitoring
            "Monitoring Guide": "Monitoring-Leitfaden"
            "Monitoring Troubleshooting": "Monitoring-Fehlerbehebung"
            "Grafana Dashboards": "Grafana-Dashboards"
            "Prometheus Alerts Guide": "Prometheus-Alarm-Leitfaden"
            "Prometheus Queries Reference": "Prometheus-Abfrage-Referenz"
            Automation: Automatisierung
            "Automated Maintenance": "Automatisierte Wartung"
            "Docker Cleanup": "Docker-Bereinigung"
            "Docker Log Rotation": "Docker-Log-Rotation"
            Maintenance: Wartung
            "Image Upgrade Checklist": "Image-Upgrade-Checkliste"
            "RAG & Search": "RAG & Suche"
            "RAG Monitoring": "RAG-Monitoring"
            "SearXNG Redis Troubleshooting": "SearXNG Redis Fehlerbehebung"
            Runbooks: Runbooks
            "Backup & Restore": "Backup & Wiederherstellung"
            "Configuration Changes": "Konfigurationsänderungen"
            "Docling Shared Volume": "Docling Shared Volume"
            "Access Log Sync & Fluent Bit": "Access Log Sync & Fluent Bit"
            "Service Restart": "Dienst-Neustart"
            "Alertmanager Noise Reduction": "Alertmanager-Rauschunterdrückung"
            "Troubleshooting": "Fehlerbehebung"
            "Runbooks (DE Summary)": "Runbooks (DE Kurzübersicht)"
            Diagnostics: Diagnose
            "Diagnostics Overview": "Diagnose-Übersicht"
            "Diagnostic Methodology": "Diagnose-Methodik"
            "Troubleshooting Guide": "Fehlerbehebungs-Leitfaden"
            "Data & Storage": "Daten & Speicher"
            "Database Monitoring Plan": "Datenbank-Monitoring-Plan"
            "Database Optimizations": "Datenbank-Optimierungen"
            "Database Troubleshooting": "Datenbank-Fehlerbehebung"
            "Redis Monitoring": "Redis-Monitoring"
            "Redis Operations": "Redis-Betrieb"
            "VLLM Resource Optimization": "VLLM-Ressourcenoptimierung"
            Security: Sicherheit
            "Security Policy": "Sicherheitsrichtlinie"
            "Log Audit": "Log-Audit"
            "Reference": "Referenz"
            "API Reference": "API-Referenz"
            Development: Entwicklung
            "GitHub Environments": "GitHub-Umgebungen"
            "MCPO Integration": "MCPO-Integration"
            "Pre-commit Hooks": "Pre-commit-Hooks"
            "Code Standards": "Code-Standards"
            "Documentation Refactoring Plan": "Dokumentations-Refactoring-Plan"
            "Status Snippet": "Status-Snippet"
            VERSION: VERSION
            CHANGELOG: CHANGELOG
            "Reports & Archive": "Berichte & Archiv"
            "Archive Overview": "Archiv-Übersicht"
            "Archive READMEs": "Archiv-READMEs"
            Audits: Audits
            "Legacy Index": "Legacy-Index"
            "Legacy Academy Index": "Legacy-Academy-Index"
            "Incidents & Remediation": "Vorfälle & Behebung"
            "Config Archives": "Konfigurationsarchive"
            Other: Sonstiges
            "Remote Branch Cleanup": "Remote-Branch-Bereinigung"
  - minify:
      minify_html: true
  - git-revision-date-localized:
      enabled: false

# Markdown Extensions
markdown_extensions:
  # Python Markdown
  - abbr
  - admonition
  - attr_list
  - def_list
  - footnotes
  - md_in_html
  - toc:
      permalink: true
      title: "Table of Contents"

  # Python Markdown Extensions
  - pymdownx.arithmatex:
      generic: true
  - pymdownx.betterem:
      smart_enable: all
  - pymdownx.caret
  - pymdownx.details
  - pymdownx.emoji:
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.highlight:
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
  - pymdownx.inlinehilite
  - pymdownx.keys
  - pymdownx.magiclink:
      repo_url_shorthand: true
      user: DIZ-admin
      repo: erni-ki
  - pymdownx.mark
  - pymdownx.smartsymbols
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
  - pymdownx.tabbed:
      alternate_style: true
  - pymdownx.tasklist:
      custom_checkbox: true
  - pymdownx.tilde

# Extra CSS and JS
extra_css:
  - stylesheets/extra.css

extra_javascript:
  - javascripts/mathjax.js
  - https://polyfill.io/v3/polyfill.min.js?features=es6
  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js

# Extra settings
extra:
  version:
    provider: mike
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/DIZ-admin/erni-ki
    - icon: fontawesome/brands/docker
      link: https://github.com/DIZ-admin/erni-ki/pkgs/container/erni-ki%2Fauth
  alternate:
    - name: "English"
      link: /
      lang: en
    - name: "Russian"
      link: /ru/
      lang: ru
    - name: "Deutsch"
      link: /de/
      lang: de

  analytics:
    provider: google
    property: G-XXXXXXXXXX
  consent:
    title: Cookie Consent
    description: >-
      We use cookies to improve documentation and analytics.
      With your consent, this helps us improve the documentation.

# Navigation Structure
nav:
  - Home: index.md
  - "Platform Overview": overview.md
  - Glossary: GLOSSARY.md
  - "Quick Start":
      - "Overview": getting-started/index.md
      - "Installation": getting-started/installation.md
      - "Configuration": getting-started/configuration-guide.md
      - "Users": getting-started/user-guide.md
      - "External Access": getting-started/external-access-setup.md
      - "Local DNS": getting-started/local-network-dns-setup.md
      - "DNSMasq": getting-started/dnsmasq-setup-instructions.md
      - "Port Forwarding": getting-started/port-forwarding-setup.md
  - Deployment:
      - "Overview": deployment/index.md
      - "Production Checklist": deployment/production-checklist.md
  - Architecture:
      - "Overview (README)": architecture/index.md
      - Overview: architecture/architecture.md
      - "Services": architecture/services-overview.md
      - "Inventory": architecture/service-inventory.md
      - "Nginx configuration": architecture/nginx-configuration.md
  - "Development Guides":
      - "Overview": development/index.md
      - "Setup Guide": development/setup-guide.md
  - Examples:
      - "Overview": examples/index.md
      - "API Usage (REST)": examples/api-usage-rest.md
      - "Nginx Examples": examples/nginx-examples.md
      - "Academy KI":
          - Overview: academy/index.md
          - "Open WebUI Basics": academy/openwebui-basics.md
          - "Prompting 101": academy/prompting-101.md
          - "Context Engineering 101": academy/context-engineering-101.md
          - "HowTo":
              - Overview: academy/howto/index.md
              - "Create JIRA Ticket (AI-assisted)": academy/howto/create-jira-ticket-with-ai.md
              - "Write Customer Email": academy/howto/write-customer-email.md
              - "Summarize Meeting": academy/howto/summarize-meeting-notes.md
      - "News":
          - Feed: academy/news/index.md
          - "2025-01-release-x": academy/news/2025-01-release-x.md
  - System:
      - "System Status": system/status.md
  - Operations:
      - "Overview": operations/index.md
      - Core:
          - "Overview": operations/core/index.md
          - "Operations Handbook": operations/core/operations-handbook.md
          - "Runbooks Summary": operations/core/runbooks-summary.md
          - "GitHub Governance": operations/core/github-governance.md
      - Monitoring:
          - "Overview": operations/monitoring/index.md
          - "Monitoring Guide": operations/monitoring/monitoring-guide.md
          - "Grafana Dashboards": operations/monitoring/grafana-dashboards-guide.md
          - "Prometheus Queries Reference": operations/monitoring/prometheus-queries-reference.md
          - "SearXNG Redis Troubleshooting": operations/monitoring/searxng-redis-issue-analysis.md
          - "Alertmanager Noise Reduction": operations/monitoring/alertmanager-noise-reduction.md
          - "Access Log Sync": operations/monitoring/access-log-sync-and-fluentbit.md
      - Automation:
          - "Overview": operations/automation/index.md
          - "Automated Maintenance": operations/automation/automated-maintenance-guide.md
          - "Docker Log Rotation": operations/automation/docker-log-rotation.md
      - AI:
          - "Overview": operations/ai/index.md
          - "LiteLLM Redis Caching": operations/ai/litellm-redis-caching.md
      - Maintenance:
          - "Overview": operations/maintenance/index.md
          - "Backup Guide": operations/backup-guide.md
          - "Image Upgrade Checklist": operations/maintenance/image-upgrade-checklist.md
          - "Service Restart": operations/maintenance/service-restart-procedures.md
          - "Docling Shared Volume": operations/maintenance/docling-shared-volume.md
      - Troubleshooting:
          - "Overview": operations/troubleshooting/index.md
          - "Troubleshooting Guide": operations/troubleshooting/troubleshooting-guide.md
      - Database:
          - "Overview": operations/database/index.md
          - "Monitoring Plan": operations/database/database-monitoring-plan.md
          - "Optimizations": operations/database/database-production-optimizations.md
          - "Troubleshooting": operations/database/database-troubleshooting.md
          - "Redis Monitoring": operations/database/redis-monitoring-grafana.md
          - "Redis Operations": operations/database/redis-operations-guide.md
          - "VLLM Optimization": operations/database/vllm-resource-optimization.md
      - Diagnostics:
          - "Diagnostics Overview": operations/diagnostics/index.md
      - "Diagnostic Methodology": operations/diagnostics/erni-ki-diagnostic-methodology.md
  - "Data & Storage": data/index.md
  - Security:
      - "Overview": security/index.md
      - "Security Policy": security/security-policy.md
      - "Authentication": security/authentication.md
      - "Security Best Practices": security/security-best-practices.md
      - "SSL/TLS Setup": security/ssl-tls-setup.md
      - "Log Audit": security/log-audit.md
  - Reference:
      - "Overview": reference/index.md
      - "API Reference": reference/api-reference.md
      - "Webhook API": reference/webhook-api.md
      - Development: reference/development.md
      - "GitHub Environments": reference/github-environments-setup.md
      - "MCPO Integration": reference/mcpo-integration-guide.md
      - "Pre-commit Hooks": reference/pre-commit-hooks.md
      - "Metadata Standards": reference/metadata-standards.md
      - "Style Guide": reference/style-guide.md
      - "Code Standards": quality/code-standards.md
      - "No Emoji Policy": reference/NO-EMOJI-POLICY.md
      - "Emoji Style Guide": reference/emoji-style-guide.md
      - "Documentation Refactoring Plan": reference/documentation-refactoring-plan.md
      - "Documentation Maintenance": reference/documentation-maintenance-strategy.md
      - "Non-root Containers Plan": reference/non-root-containers-plan.md
      - "Service Versions": reference/service-versions.md
      - "Language Policy": reference/language-policy.md
      - VERSION: VERSION.md
      - CHANGELOG: reference/CHANGELOG.md
  - Troubleshooting:
      - "Common Issues": troubleshooting/common-issues.md

  - "Reports & Archive":
      - "Archive READMEs":
          - "Audits": archive/audits/index.md
      - "Budget Analysis": budget-analysis.md
      - "Reports":
          - "Index": reports/index.md
      - "Architecture Diagrams":
          - "Index": architecture/diagrams/index.md
          - "Overview": architecture/diagrams/architecture-overview.md
          - "Data Flow": architecture/diagrams/data-flow.md
          - "Deployment": architecture/diagrams/deployment-diagram.md
          - "Network Topology": architecture/diagrams/network-topology.md
      - "System": system/index.md
      - "Security Action Plan": operations/security-action-plan.md

# Validation Settings
validation:
  omitted_files: warn
  absolute_links: warn
  unrecognized_links: warn

# Build Settings
strict: false
use_directory_urls: true

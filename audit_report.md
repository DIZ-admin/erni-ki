# –û—Ç—á–µ—Ç –æ–± –∞—É–¥–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ ERNI-KI

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** 2025-11-23 **–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### 1.1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è

| –ü—Ä–æ–≤–µ—Ä–∫–∞                      | –°—Ç–∞—Ç—É—Å         | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                                                                                             |
| :---------------------------- | :------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **–§–∏–∫—Å–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π –æ–±—Ä–∞–∑–æ–≤**   | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ    | –í –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã. <br>‚ùå `docling` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–≥ `main` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.<br>‚ö†Ô∏è `pgvector:pg17`, `redis:7-alpine`, `uptime-kuma:1` ‚Äî —à–∏—Ä–æ–∫–∏–µ —Ç–µ–≥–∏. |
| **–ü–æ–ª–∏—Ç–∏–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞**      | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ    | –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç `unless-stopped` –∏–ª–∏ `always`.                                                                                                        |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Watchtower**   | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ    | –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (DB, Nginx, AI). <br>‚ö†Ô∏è –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è Redis (—Ä–∏—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–∂–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏).                                        |
| **–õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU/RAM)** | ‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è AI —Å–µ—Ä–≤–∏—Å–æ–≤ (Ollama, LiteLLM, OpenWebUI). <br>‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–ª—è `db`, `redis`, `nginx`, `searxng` –∏ —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.              |
| **GPU –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**          | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ    | `runtime: nvidia` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è Ollama, OpenWebUI, Docling.                                                                                    |

### 1.2. –°–µ—Ç—å –∏ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

| –ü—Ä–æ–≤–µ—Ä–∫–∞                   | –°—Ç–∞—Ç—É—Å      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                                                                  |
| :------------------------- | :---------- | :--------------------------------------------------------------------------------------------------------------------------- |
| **–°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è**       | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ `127.0.0.1` –∏–ª–∏ –±–µ–∑ –ø–æ—Ä—Ç–æ–≤. <br>‚ö†Ô∏è `ollama` –ø—É–±–ª–∏–∫—É–µ—Ç –ø–æ—Ä—Ç `11434` –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (0.0.0.0). |
| **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –í—Å–µ stateful —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç bind mounts –≤ `./data/` –∏–ª–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–º–∞.                                                |
| **–ë—ç–∫–∞–ø—ã**                 | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –°–µ—Ä–≤–∏—Å `backrest` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±—ç–∫–∞–ø –≤—Å–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./data`, `./conf` –∏ `./env`.                                            |

## 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –ü—Ä–æ–≤–µ—Ä–∫–∞                     | –°—Ç–∞—Ç—É—Å      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                                                             |
| :--------------------------- | :---------- | :---------------------------------------------------------------------------------------------------------------------- |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏**     | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Docker Secrets. –°–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä. `litellm.sh`) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç —Å–µ–∫—Ä–µ—Ç—ã.                   |
| **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π** | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ù–∞—Å—Ç—Ä–æ–µ–Ω `.gitleaks.toml`, –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã `security:scan` –≤ `package.json`.                                               |
| **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**            | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | `watchtower` —Ç—Ä–µ–±—É–µ—Ç root. `ollama`/`openwebui` —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç root (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –¥–ª—è Docker, –Ω–æ –º–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å).             |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx**       | ‚ùå –ö–†–ò–¢–ò–ß–ù–û | **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `conf/nginx/nginx.conf`, `conf/nginx/conf.d/default.conf`. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è. |

## 3. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –ü—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –ü—Ä–æ–≤–µ—Ä–∫–∞         | –°—Ç–∞—Ç—É—Å      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                    |
| :--------------- | :---------- | :----------------------------------------------------------------------------- |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Unit (Vitest) –∏ E2E (Playwright) —Ç–µ—Å—Ç—ã. –ï—Å—Ç—å —Å–ø–µ—Ü. —Ç–µ—Å—Ç—ã –¥–ª—è GPU/AI. |
| **–õ–∏–Ω—Ç–∏–Ω–≥**      | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | ESLint, Prettier, Commitlint, TypeScript check –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.                      |
| **CI/CD**        | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä workflows: CI, Deploy, Release, Security.                         |

## 4. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Observability)

| –ü—Ä–æ–≤–µ—Ä–∫–∞          | –°—Ç–∞—Ç—É—Å      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                           |
| :---------------- | :---------- | :------------------------------------------------------------------------------------ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**   | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ 4-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Fluent Bit + Loki.          |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**    | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –û–±—à–∏—Ä–Ω—ã–π —Å—Ç–µ–∫: Prometheus, Grafana, Alertmanager. 10+ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤ (–≤–∫–ª—é—á–∞—è GPU –∏ AI). |
| **Health Checks** | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | Healthchecks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `compose.yml`.                 |

## 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ö–æ–º–ø–ª–∞–µ–Ω—Å

| –ü—Ä–æ–≤–µ—Ä–∫–∞             | –°—Ç–∞—Ç—É—Å      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                          |
| :------------------- | :---------- | :------------------------------------------------------------------- |
| **README**           | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ê–∫—Ç—É–∞–ª—å–Ω—ã–π, —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ —Å—Å—ã–ª–∫–∏. |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**      | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –ï—Å—Ç—å —Ä–∞–∑–¥–µ–ª `docs/architecture/` –∏ –æ–±–∑–æ—Ä –≤ README.                   |
| **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ | –°—Å—ã–ª–∫–∞ –Ω–∞ `docs/reference/api-reference.md` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.            |

## 6. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (Next Steps)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫)

1.  **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx**: –°–æ–∑–¥–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
    `conf/nginx/nginx.conf` –∏ `conf/nginx/conf.d/default.conf`. –ë–µ–∑ –Ω–∏—Ö –≤—Ö–æ–¥–Ω–æ–π
    —à–ª—é–∑ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.
2.  **–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é Docling**: –í `compose.yml` –∏–ª–∏ `docling.env` –∑–∞–º–µ–Ω–∏—Ç—å
    —Ç–µ–≥ `main` –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (–Ω–∞–ø—Ä. `v1.0.0` –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π digest).

### üü† –í–∞–∂–Ω–æ (–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)

1.  **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã**: –î–æ–±–∞–≤–∏—Ç—å `mem_limit` –∏ `cpus` –¥–ª—è `db` (Postgres),
    `redis`, `nginx` –∏ `searxng` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è OOM –≤—Å–µ–π –Ω–æ–¥—ã.
2.  **–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å Ollama**: –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã `ollama` –Ω–∞ `127.0.0.1:11434:11434`,
    —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø (–µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).

### üü° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (–£–ª—É—á—à–µ–Ω–∏–µ)

1.  **–£—Ç–æ—á–Ω–∏—Ç—å —Ç–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤**: –ó–∞–º–µ–Ω–∏—Ç—å `pg17`, `7-alpine`, `1` –Ω–∞ –±–æ–ª–µ–µ
    –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ (–Ω–∞–ø—Ä. `pg17.2`, `7.4-alpine`, `1.23.0`).
2.  **–£—Å–∏–ª–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ—Ç non-root
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.
